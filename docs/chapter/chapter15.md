[TOC]

# 题目
1. 按各科成绩进行排序，并显示排名， Score 重复时保留名次空缺
2. 按各科成绩进行排序，并显示排名， Score 重复时合并名次



# 解释

题目1：

```mysql
mysql> SELECT SC.CId ,@curRank := @curRank + 1 AS rank,SC.score FROM (SELECT @curRank := 0) AS t ,SC ORDER BY SC.score DESC;
+------+------+-------+
| CId  | rank | score |
+------+------+-------+
| 03   |    1 |  99.0 |
| 03   |    2 |  98.0 |
| 02   |    3 |  90.0 |
| 02   |    4 |  89.0 |
| 02   |    5 |  87.0 |
| 03   |    6 |  80.0 |
| 01   |    7 |  80.0 |
| 02   |    8 |  80.0 |
| 03   |    9 |  80.0 |
| 01   |   10 |  80.0 |
| 01   |   11 |  76.0 |
| 01   |   12 |  70.0 |
| 02   |   13 |  60.0 |
| 01   |   14 |  50.0 |
| 03   |   15 |  34.0 |
| 01   |   16 |  31.0 |
| 02   |   17 |  30.0 |
| 03   |   18 |  20.0 |
+------+------+-------+
18 rows in set (0.00 sec)

```

题目2：

```mysql
mysql> SELECT SC.CId , CASE WHEN @fontscore=score THEN @curRank WHEN @fontscore:=score THEN @curRank:=@curRank+1  END AS rank,SC.score
    -> FROM (SELECT @curRank:=0 ,@fontage:=NULL) AS t ,SC
    -> ORDER BY SC.score DESC;
+------+------+-------+
| CId  | rank | score |
+------+------+-------+
| 03   |    1 |  99.0 |
| 03   |    2 |  98.0 |
| 02   |    3 |  90.0 |
| 02   |    4 |  89.0 |
| 02   |    5 |  87.0 |
| 03   |    6 |  80.0 |
| 01   |    7 |  80.0 |
| 02   |    8 |  80.0 |
| 03   |    9 |  80.0 |
| 01   |   10 |  80.0 |
| 01   |   11 |  76.0 |
| 01   |   12 |  70.0 |
| 02   |   13 |  60.0 |
| 01   |   14 |  50.0 |
| 03   |   15 |  34.0 |
| 01   |   16 |  31.0 |
| 02   |   17 |  30.0 |
| 03   |   18 |  20.0 |
+------+------+-------+
18 rows in set (0.00 sec)
```



# 总结

